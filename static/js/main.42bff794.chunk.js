(this.webpackJsonpuntitled=this.webpackJsonpuntitled||[]).push([[0],{18:function(e,t,n){"use strict";var r=n(23),a=n(24),c=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"setItem",value:function(e,t){if("string"!==typeof t)throw new Error("Value of localStorage by key ".concat(e," is not string."));if("string"!==typeof e)throw new Error("Key ".concat(e," is not string"));localStorage.setItem(e,t)}},{key:"getItem",value:function(e){if("string"!==typeof e)throw new Error("Key ".concat(e," is not string"));return localStorage.getItem(e)}},{key:"unsetItem",value:function(e){if("string"!==typeof e)throw new Error("Key ".concat(e," is not string"));localStorage.removeItem(e)}},{key:"clear",value:function(){localStorage.clear()}}]),e}();t.a=new c},20:function(e,t,n){e.exports={headerTabs:"HeaderTabs_headerTabs__3Wd5E",exit_btn:"HeaderTabs_exit_btn__3PWGA",headerTabs__name:"HeaderTabs_headerTabs__name__1YR8g",active:"HeaderTabs_active__280n_"}},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return o}));var r="first-name",a="last-name",c="email",o="password"},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return o}));var r="SET_REVIEW",a="SET_REVIEW",c=function(e){return{type:r,payload:e}},o=function(e){return{type:a,payload:e}}},33:function(e,t,n){e.exports={header:"Header_header__1VCKf"}},34:function(e,t,n){e.exports={headerLogo:"HeaderLogo_headerLogo__3P8EZ"}},40:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(15),c=n.n(a),o=(n(40),n(30)),i=n(13),s=n(35),u=n(10),l=n(8),d={books:[]};var b=n(21),f=n(28),j={reviews:[]};var h={books:[],loading:!1,error:null};var v=Object(i.b)({libraryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a:return{books:[].concat(Object(u.a)(e.books),[t.payload])};case l.e:return{books:e.books.filter((function(e){return e.id!==t.payload.id}))};default:return e}},bookshelfReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.b:var n=t.payload,r=n.id,a=n.rating,c=n.review,o=e.reviews;if(o.some((function(e){return e.id===r}))){var i=o.findIndex((function(e){return e.id===r}));return o[i].rating!==a||o[i].review!==c?{reviews:Object.assign(Object(u.a)(o),Object(b.a)({},i,{id:r,rating:a,review:c}))}:{reviews:Object(u.a)(o)}}return{reviews:[].concat(Object(u.a)(o),[{id:r,rating:a,review:c}])};case f.a:var s=e.reviews.findIndex((function(e){return e.id===t.payloadid}));return{reviews:[].concat(Object(u.a)(e.reviews.splice(s,1)),Object(u.a)(e.reviews))};default:return e}},getBooksReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.c:return{books:[],loading:!0,error:null};case l.d:return{books:t.payload,loading:!1,error:null};case l.b:return{books:[],loading:!1,error:t.payload};default:return e}}}),p=n(17),O=n.n(p),g=n(14),m=n(23),x=n(24),w="".concat("https://www.googleapis.com/books","/").concat("v1","/volumes"),y=new(function(){function e(){Object(m.a)(this,e)}return Object(x.a)(e,[{key:"search",value:function(e){return fetch("".concat(w,"?q=").concat(e),{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return function(e){var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?e.json().then((function(t){return{status:e.status,payload:t}})):{status:e.status,payload:{error:"Unexpected error"}}}(e)}))}}]),e}()),k=O.a.mark(_);function _(e){var t,n,r;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(g.b)(y.search,e.payload);case 3:if(t=a.sent,n=t.status,r=t.payload,200!==n){a.next=12;break}return a.next=9,Object(g.c)(Object(l.i)(null===r||void 0===r?void 0:r.items));case 9:case 14:return a.abrupt("return",{status:n,payload:r});case 12:return a.next=14,Object(g.c)(Object(l.g)(r));case 15:a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(0),console.log("getBooksWorker",a.t0),a.next=22,Object(g.c)(Object(l.g)(a.t0));case 22:case"end":return a.stop()}}),k,null,[[0,17]])}var E=[Object(g.d)(l.c,_)],S=O.a.mark(T);function T(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)(Object(u.a)(E));case 2:case"end":return e.stop()}}),S)}var N=Object(s.a)(),I=i.c;var W=[];W.push(N);var B=Object(i.d)(v,I(i.a.apply(void 0,W)));N.run(T);var R=B,C=n(11),K=n(9),L=n(4),A=n(33),U=n.n(A),H=n(34),G=n.n(H),P=n.p+"static/media/logo.f78c8a42.webp",V=n(2);var z=function(){return Object(V.jsx)("img",{className:G.a.headerLogo,src:P,alt:"logo"})},M=n(20),D=n.n(M),F=n(18),J=function(){var e=Object(L.h)(),t=Object(r.useState)(null),n=Object(K.a)(t,2),a=n[0],c=n[1];return Object(V.jsxs)("ul",{className:D.a.headerTabs,children:[[{name:"Library",pathname:"/books-review/library"},{name:"My Bookshelf",pathname:"/books-review/bookshelf"},{name:"Contacts",pathname:"/books-review/contacts"}].map((function(e,t){return Object(V.jsx)("li",{onClick:(n=e.name,function(){c(n)}),className:"".concat(D.a.headerTabs__name," ").concat(a===e.name?D.a.active:""),children:Object(V.jsx)(C.b,{to:e.pathname,children:e.name})},t);var n})),Object(V.jsx)("button",{className:D.a.exit_btn,onClick:function(){F.a.clear(),e("/books-review/auth")},children:"Sign out"})]})},q=function(){return Object(V.jsxs)("header",{className:U.a.header,children:[Object(V.jsx)(z,{}),Object(V.jsx)(J,{})]})},Q=n(31),Y=n.p+"static/media/github.04be58c1.svg",Z=n.p+"static/media/gitlab.a9ff2a14.svg",$=function(){return Object(V.jsx)("footer",{className:"border-t relative border-gray-200 w-1200 m-auto mt-6",children:Object(V.jsxs)("div",{className:"container flex flex-wrap items-center justify-center py-8 mx-auto  lg:justify-between",children:[Object(V.jsx)("div",{className:"flex flex-wrap justify-center",children:Object(V.jsxs)("ul",{className:"flex items-center space-x-4",children:[Object(V.jsx)("li",{children:Object(V.jsx)(C.b,{to:"/library",children:"Library"})}),Object(V.jsx)("li",{children:Object(V.jsx)(C.b,{to:"/bookshelf",children:"My Bookshelf"})}),Object(V.jsx)("li",{children:Object(V.jsx)(C.b,{to:"/contacts",children:"Contacts"})})]})}),Object(V.jsx)("div",{className:"absolute top-2/4 left-2/4 transform -translate-x-2/4 -translate-y-2/4",children:"Books Review \xa9 2021"}),Object(V.jsxs)("div",{className:"flex justify-center items-center gap-x-1.5 mt-4 lg:mt-0",children:[Object(V.jsx)("a",{href:"https://github.com/Assetbekov-Almar",target:"_blank",rel:"noreferrer",children:Object(V.jsx)("img",{src:Y,alt:"github"})}),Object(V.jsx)("a",{href:"https://gitlab.com/almar-a",target:"_blank",rel:"noreferrer",children:Object(V.jsx)("img",{src:Z,className:"w-8 h-8",alt:"gitlab"})})]})]})})},X=n(27),ee=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,55))})),te=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,56))})),ne=Object(r.lazy)((function(){return Promise.all([n.e(5),n.e(4)]).then(n.bind(null,54))})),re=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,53))}));function ae(){return Object(V.jsxs)("div",{children:[Object(V.jsx)(Q.a,{}),Object(V.jsx)(q,{}),Object(V.jsx)("div",{className:"content w-1200 m-auto",children:Object(V.jsx)(L.b,{})}),Object(V.jsx)($,{})]})}var ce=function(){var e=Object(L.g)(),t=Object(r.useState)(F.a.getItem(X.a)),n=Object(K.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){c(F.a.getItem(X.a))}),[e.pathname]),Object(V.jsx)(r.Suspense,{fallback:Object(V.jsx)("div",{children:"loading..."}),children:Object(V.jsx)(L.e,{children:a?Object(V.jsxs)(L.c,{path:"/books-review/",element:Object(V.jsx)(ae,{}),children:[Object(V.jsx)(L.c,{path:"library",element:Object(V.jsx)(ee,{})}),Object(V.jsx)(L.c,{path:"bookshelf",element:Object(V.jsx)(te,{})}),Object(V.jsx)(L.c,{path:"contacts",element:Object(V.jsx)(ne,{})}),Object(V.jsx)(L.c,{path:"*",element:Object(V.jsx)(L.a,{to:"/books-review/"})})]}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(L.c,{path:"/books-review/auth",element:Object(V.jsx)(re,{})}),Object(V.jsx)(L.c,{path:"*",element:Object(V.jsx)(L.a,{to:"/books-review//auth"})})]})})})};var oe=function(){return Object(V.jsx)(ce,{})},ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ue=Object(V.jsx)(o.a,{store:R,children:Object(V.jsx)(C.a,{children:Object(V.jsx)(oe,{})})});c.a.render(ue,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/books-review",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/books-review","/service-worker.js");ie?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):se(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):se(t,e)}))}}()},8:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"j",(function(){return b})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return i}));var r="GET_BOOKS_REQUEST",a="GET_BOOKS_SUCCESS",c="GET_BOOKS_FAILURE",o="ADD_BOOK",i="REMOVE_BOOK",s=function(e){return{type:r,payload:e}},u=function(e){return{type:a,payload:e}},l=function(e){return{type:c,payload:e}},d=function(e){return{type:o,payload:e}},b=function(e){return{type:i,payload:e}}}},[[46,1,2]]]);
//# sourceMappingURL=main.42bff794.chunk.js.map